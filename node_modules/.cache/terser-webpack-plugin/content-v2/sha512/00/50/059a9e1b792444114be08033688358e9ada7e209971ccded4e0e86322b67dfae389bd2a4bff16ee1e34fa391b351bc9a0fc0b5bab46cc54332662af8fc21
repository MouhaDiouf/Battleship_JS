{"code":"!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=3)}([function(t,e,n){const o=n(1);t.exports=function(t=null){return{ships:[],moves:[],letterToNum:{A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9},createShip:function(t){return o(t)},board:function(){const t=[];let e=[],n=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\"],o=[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"];for(let r of n)for(let n of o)e.push(r+n),10===e.length&&(t.push(e),e=[]);return t}(),placeShip:function(t,e,n){const o=this.letterToNum[e];let r=n+t.length;if(r<=10)for(let i=n;i<r;i++)this.board[o][i-1]+=`ship-${this.ships.length}`,this.board[o-1]&&(this.board[o-1][i-1]+=\"blank\"),this.board[o+1]&&(this.board[o+1][i-1]+=\"blank\"),t.ship_coordonates.push(`${e}${i}`);else{r=n-t.length;for(let i=n;i>r;i--)this.board[o][i-1]+=`ship-${this.ships.length}`,this.board[o-1]&&(this.board[o-1][i-1]+=\"blank\"),this.board[o+1]&&(this.board[o-1][i-1]+=\"blank\"),t.ship_coordonates.unshift(`${e}${i}`)}return this.ships.push(t),console.log(this.board),this.board},receiveAttack:function(t,e){const n=this.letterToNum[t];let o=this.board[n][e-1].split(\"-\");if(\"ship\"===o[0]){this.board[n][e-1]=\"hit\";const r=o[1],i=this.ships[r],a=i.ship_coordonates.indexOf(`${t}${e}`);i.ship_coordonates[a]=\"hit\"}else this.board[n][e-1]=\"miss\"},attack:function(e,n){t&&t.board.receiveAttack(e,n)},all_ships_sunk:function(){return this.ships.every(t=>!0===t.isSunk())},game_over:function(){alert(\"game over\")}}}},function(t,e){t.exports=function(t){return{length:t,places:new Array(t).fill(\"not hit\"),state:\"not-sunk\",hit:function(t){this.places[t-1]=\"hit\"},isSunk:function(){return!!this.places.every(t=>\"hit\"===t)&&(this.state=\"sunk\",!0)},ship_coordonates:[]}}},function(t,e,n){const o=n(0);t.exports=function(){return{turn:!1,gameEnvironment:o(),placeShip:function(t,e,n){const o=this.gameEnvironment.createShip(t);this.gameEnvironment.placeShip(o,e,n)},printBoard:function(){const t=document.createElement(\"div\");t.classList.add(\"board\",\"player-board\");const e=document.querySelector(\".container\");e.innerHTML=\"\";const n=document.createElement(\"table\");n.innerHTML+=\"<tbody> </tbody>\",t.appendChild(n),e.appendChild(t),this.gameEnvironment.board.forEach((t,e)=>{let n=document.querySelectorAll(\"tbody\"),o=n[n.length-1],r=document.createElement(\"tr\");for(let e of t){const t=document.createElement(\"td\");if(e.match(/ship/g)){const n=e.match(/ship-\\d+/)[0],o=e.match(/[A-Z]\\d+/)[0];t.classList.add(\"player-ship\",n,o)}else t.classList.add(e);t.innerHTML=\"\",r.appendChild(t)}o.appendChild(r)})},updateBoard:function(){if(document.querySelector(\"p\")){const t=document.querySelector(\"p\").innerHTML,e=t.match(/[A-J]/g)[0],n=Number(t.match(/\\d+/g)[0]);this.gameEnvironment.receiveAttack(e,n),this.updateCell(t)}Array.from(document.querySelectorAll(\".player-board td\")).forEach(t=>{if(t.className.match(/hit/g)){const e=t.className,n=e.match(/ship-\\d+/)[0],o=Number(n.charAt(n.length-1)),r=e.match(/[A-Z]\\d+/)[0],i=this.gameEnvironment.ships[o];for(let t=0;t<i.ship_coordonates.length;t++)i.ship_coordonates[t]==r&&(i.places[t]=\"hit\",i.isSunk()&&this.changeShipSunkColor(i))}else t.className.match(/miss/g)})},changeShipSunkColor:function(t){const e=Array.from(document.querySelectorAll(\".player-board td\"));let n=10*this.gameEnvironment.letterToNum[t.ship_coordonates[0][0]]+Number(t.ship_coordonates[0].match(/\\d+/g)[0])-1,o=0;for(;o<t.length;)e[n].classList.add(\"sunk\"),e[n].classList.remove(\"hit\"),n++,o++},updateCell:function(t){const e=document.querySelector(`.${t}`);e.classList.contains(\"player-ship\")?e.classList.add(\"hit\"):e.classList.add(\"miss\")},placeRandomShips:function(){[1,1,1,1,2,2,2,3,3,4].forEach(t=>{let e=this.randomPlace();for(;!this.validPosition(t,e[0],e[1]);)e=this.randomPlace();console.log(e),this.placeShip(t,e[0],e[1])}),this.printBoard()},randomPlace:function(){return[String.fromCharCode(65+Math.round(9*Math.random())),Math.ceil(10*Math.random())]},validPosition:function(t,e,n){const o=this.gameEnvironment.board[this.gameEnvironment.letterToNum[e]];if(n+t<=10){let e=n+t-1;for(;e>n-1;){if(o[e-1].match(/ship/)||o[e-1].match(/blank/))return!1;e--}return!0}{let e=n-t-1;for(;n-1>e;){if(o[n-1].match(/ship/)||o[n-1].match(/blank/))return!1;n--}return!0}}}}},function(t,e,n){n(1),n(0),n(2);n(4)().start()},function(t,e,n){const o=n(2),r=n(5);t.exports=function(){return{start:function(){const t=o(),e=r();t.placeRandomShips(),e.placeRandomShips();const n=setInterval((function(){t.gameEnvironment.all_ships_sunk()||e.gameEnvironment.all_ships_sunk()?(t.gameEnvironment.game_over(),clearInterval(n)):(e.updateBoard(),t.updateBoard())}),300)}}}},function(t,e,n){const o=n(0);t.exports=function(){return{randomMove:function(){const t=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\"];return[t[Math.floor(Math.random()*t.length)],Math.ceil(10*Math.random())]},turn:!0,gameEnvironment:o(),placeShip:function(t,e,n){const o=this.gameEnvironment.createShip(t);this.gameEnvironment.placeShip(o,e,n)},printBoard:function(){const t=document.createElement(\"div\");t.classList.add(\"board\",\"computer-board\");const e=document.querySelector(\".container\"),n=document.createElement(\"table\");n.innerHTML+=\"<tbody> </tbody>\",t.appendChild(n),e.appendChild(t),this.gameEnvironment.board.forEach((t,e)=>{let n=document.querySelectorAll(\"tbody\"),o=n[n.length-1],r=document.createElement(\"tr\");for(let e of t){const t=document.createElement(\"td\");if(e.match(/ship/g)){const n=e.match(/ship-\\d+/)[0],o=e.match(/[A-Z]\\d+/)[0];t.classList.add(\"computer-ship\",n,o)}else t.classList.add(e);t.innerHTML=\"\",r.appendChild(t)}o.appendChild(r)}),document.querySelector(\".computer-board\").addEventListener(\"click\",this.updateCell)},updateBoard:function(){const t=Array.from(document.querySelectorAll(\".computer-board td\"));if(document.querySelector(\".turn\")){let t=document.querySelector(\".turn\");if(\"Computer\"===t.innerHTML){const e=this.validRandomComputerMove();if(document.querySelector(\"p\")){const t=document.querySelector(\"p\");t.innerHTML=\"\",t.innerHTML+=`${e[0]}`,t.innerHTML+=`${e[1]}`}else{let t=document.createElement(\"p\");t.innerHTML+=`${e[0]}`,t.innerHTML+=`${e[1]}`,document.querySelector(\".container\").appendChild(t)}t.innerHTML=\"Player\",document.querySelector(\".computer-board\").removeEventListener(\"click\",this.updateCell)}else document.querySelector(\".computer-board\").addEventListener(\"click\",this.updateCell)}t.forEach(t=>{if(t.className.match(/hit/g)){const e=t.className,n=e.match(/ship-\\d+/)[0],o=Number(n.charAt(n.length-1)),r=e.match(/[A-Z]\\d+/)[0],i=this.gameEnvironment.ships[o];for(let t=0;t<i.ship_coordonates.length;t++)i.ship_coordonates[t]==r&&(i.places[t]=\"hit\",i.isSunk()&&this.changeShipSunk(i))}})},validRandomComputerMove:function(){let t=this.randomMove();for(;-1!==this.gameEnvironment.moves.indexOf(t.join(\"\"));)t=this.randomMove();return this.gameEnvironment.moves.push(t.join(\"\")),t},changeShipSunk:function(t){const e=Array.from(document.querySelectorAll(\".computer-board td\"));let n=10*this.gameEnvironment.letterToNum[t.ship_coordonates[0][0]]+Number(t.ship_coordonates[0].match(/\\d+/g)[0])-1,o=0;for(;o<t.length;)e[n].classList.add(\"sunk\"),n++,o++},updateCell:function(t){if(t.target.classList.contains(\"hit\")||t.target.classList.contains(\"miss\"))alert(\"you can't play twice\");else{if(document.querySelector(\".turn\"))document.querySelector(\".turn\").innerHTML=\"Computer\";else{const t=document.createElement(\"span\");t.className=\"turn\",t.innerHTML=\"Computer\",document.querySelector(\".container\").appendChild(t)}if(t.target.classList.contains(\"computer-ship\")){t.target.classList.add(\"hit\");const e=t.target.className.split(\" \");let n=e.find(t=>t.match(/ship-\\d+/g));n=Number(n[n.length-1]);const o=e.find(t=>t.match(/[A-J]\\d+/g));if(document.querySelector(\".player-move\")){const t=document.querySelector(\".player-move\");t.innerHTML=\"\",t.innerHTML=o}else{const t=document.createElement(\"span\");t.className=\"player-move\",t.innerHTML=o,document.querySelector(\".container\").appendChild(t)}}else t.target.classList.add(\"miss\")}},placeRandomShips:function(){[1,1,1,1,2,2,2,3,3,4].forEach(t=>{let e=this.randomPlace();for(;!this.validPosition(t,e[0],e[1]);)e=this.randomPlace();this.placeShip(t,e[0],e[1])}),this.printBoard()},randomPlace:function(){return[String.fromCharCode(65+Math.round(9*Math.random())),Math.ceil(10*Math.random())]},validPosition:function(t,e,n){const o=this.gameEnvironment.board[this.gameEnvironment.letterToNum[e]];if(n+t<=10){let e=n+t-1;for(;e>n-1;){if(o[e-1].match(/ship/))return!1;e--}return!0}{let e=n-t-1;for(;n-1>e;){if(o[n-1].match(/ship/))return!1;n--}return!0}}}}}]);","extractedComments":[]}