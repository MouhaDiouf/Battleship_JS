{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=3)}([function(e,t,n){const o=n(1);e.exports=function(e=null){return{ships:[],moves:[],letterToNum:{A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9},createShip:function(e){return o(e)},board:function(){const e=[];let t=[],n=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\"],o=[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"];for(let r of n)for(let n of o)t.push(r+n),10===t.length&&(e.push(t),t=[]);return e}(),placeShip:function(e,t,n){const o=this.letterToNum[t];let r=n+e.length;if(r<=10)for(let i=n;i<r;i++)this.board[o][i-1]+=`ship-${this.ships.length}`,e.ship_coordonates.push(`${t}${i}`);else{r=n-e.length;for(let i=n;i>r;i--)this.board[o][i-1]+=`ship-${this.ships.length}`,e.ship_coordonates.unshift(`${t}${i}`)}return this.ships.push(e),this.board},receiveAttack:function(e,t){const n=this.letterToNum[e];let o=this.board[n][t-1].split(\"-\");if(\"ship\"===o[0]){this.board[n][t-1]=\"hit\";const r=o[1],i=this.ships[r],a=i.ship_coordonates.indexOf(`${e}${t}`);i.ship_coordonates[a]=\"hit\"}else this.board[n][t-1]=\"miss\"},attack:function(t,n){e&&e.board.receiveAttack(t,n)},all_ships_sunk:function(){return this.ships.every(e=>!0===e.isSunk())},game_over:function(){alert(\"game over\")}}}},function(e,t){e.exports=function(e){return{length:e,places:new Array(e).fill(\"not hit\"),state:\"not-sunk\",hit:function(e){this.places[e-1]=\"hit\"},isSunk:function(){return!!this.places.every(e=>\"hit\"===e)&&(this.state=\"sunk\",!0)},ship_coordonates:[]}}},function(e,t,n){const o=n(0);e.exports=function(){return{turn:!1,gameEnvironment:o(),placeShip:function(e,t,n){const o=this.gameEnvironment.createShip(e);this.gameEnvironment.placeShip(o,t,n)},printBoard:function(){const e=document.createElement(\"div\");e.classList.add(\"board\",\"player-board\");const t=document.querySelector(\".container\");t.innerHTML=\"\";const n=document.createElement(\"table\");n.innerHTML+=\"<tbody> </tbody>\",e.appendChild(n),t.appendChild(e),this.gameEnvironment.board.forEach((e,t)=>{let n=document.querySelectorAll(\"tbody\"),o=n[n.length-1],r=document.createElement(\"tr\");for(let t of e){const e=document.createElement(\"td\");if(t.match(/ship/g)){const n=t.match(/ship-\\d+/)[0],o=t.match(/[A-Z]\\d+/)[0];e.classList.add(\"player-ship\",n,o)}else e.classList.add(t);e.innerHTML=\"\",r.appendChild(e)}o.appendChild(r)})},updateBoard:function(){if(document.querySelector(\"p\")){const e=document.querySelector(\"p\").innerHTML,t=e.match(/[A-J]/g)[0],n=Number(e.match(/\\d+/g)[0]);this.gameEnvironment.receiveAttack(t,n),this.updateCell(e)}Array.from(document.querySelectorAll(\".player-board td\")).forEach(e=>{if(e.className.match(/hit/g)){const t=e.className,n=t.match(/ship-\\d+/)[0],o=Number(n.charAt(n.length-1)),r=t.match(/[A-Z]\\d+/)[0],i=this.gameEnvironment.ships[o];for(let e=0;e<i.ship_coordonates.length;e++)i.ship_coordonates[e]==r&&(i.places[e]=\"hit\",i.isSunk()&&this.changeShipSunkColor(i))}else e.className.match(/miss/g)})},changeShipSunkColor:function(e){const t=Array.from(document.querySelectorAll(\".player-board td\"));let n=10*this.gameEnvironment.letterToNum[e.ship_coordonates[0][0]]+Number(e.ship_coordonates[0].match(/\\d+/g)[0])-1,o=0;for(;o<e.length;)t[n].classList.add(\"sunk\"),t[n].classList.remove(\"hit\"),n++,o++},updateCell:function(e){const t=document.querySelector(`.${e}`);t.classList.contains(\"player-ship\")?t.classList.add(\"hit\"):t.classList.add(\"miss\")},placeRandomShips:function(){[1,1,1,1,2,2,2,3,3,4].forEach(e=>{let t=this.randomPlace();for(;!this.validPosition(e,t[0],t[1]);)t=this.randomPlace();this.placeShip(e,t[0],t[1])}),this.printBoard()},randomPlace:function(){return[String.fromCharCode(65+Math.round(9*Math.random())),Math.ceil(10*Math.random())]},validPosition:function(e,t,n){const o=this.gameEnvironment.board[this.gameEnvironment.letterToNum[t]];if(n+e<=10){let t=n+e-1;for(;t>n-1;){if(o[t-1].match(/ship/))return!1;t--}return!0}{let t=n-e-1;for(;n-1>t;){if(o[n-1].match(/ship/))return!1;n--}return!0}}}}},function(e,t,n){n(1),n(0),n(2);n(4)().start()},function(e,t,n){const o=n(2),r=n(5);e.exports=function(){return{start:function(){const e=o(),t=r();e.placeRandomShips(),t.placeRandomShips();const n=setInterval((function(){e.gameEnvironment.all_ships_sunk()||t.gameEnvironment.all_ships_sunk()?(e.gameEnvironment.game_over(),clearInterval(n)):(t.updateBoard(),e.updateBoard())}),300)}}}},function(e,t,n){const o=n(0);e.exports=function(){return{randomMove:function(){const e=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\"];return[e[Math.floor(Math.random()*e.length)],Math.ceil(10*Math.random())]},turn:!0,gameEnvironment:o(),placeShip:function(e,t,n){const o=this.gameEnvironment.createShip(e);this.gameEnvironment.placeShip(o,t,n)},printBoard:function(){const e=document.createElement(\"div\");e.classList.add(\"board\",\"computer-board\");const t=document.querySelector(\".container\"),n=document.createElement(\"table\");n.innerHTML+=\"<tbody> </tbody>\",e.appendChild(n),t.appendChild(e),this.gameEnvironment.board.forEach((e,t)=>{let n=document.querySelectorAll(\"tbody\"),o=n[n.length-1],r=document.createElement(\"tr\");for(let t of e){const e=document.createElement(\"td\");if(t.match(/ship/g)){const n=t.match(/ship-\\d+/)[0],o=t.match(/[A-Z]\\d+/)[0];e.classList.add(\"computer-ship\",n,o)}else e.classList.add(t);e.innerHTML=\"\",r.appendChild(e)}o.appendChild(r)}),document.querySelector(\".computer-board\").addEventListener(\"click\",this.updateCell)},updateBoard:function(){const e=Array.from(document.querySelectorAll(\".computer-board td\"));if(document.querySelector(\"h1\")){let e=document.querySelector(\"h1\");if(\"Computer\"===e.innerHTML){const t=this.validRandomComputerMove();if(document.querySelector(\"p\")){const e=document.querySelector(\"p\");e.innerHTML=\"\",e.innerHTML+=`${t[0]}`,e.innerHTML+=`${t[1]}`}else{let e=document.createElement(\"p\");e.innerHTML+=`${t[0]}`,e.innerHTML+=`${t[1]}`,document.querySelector(\".container\").appendChild(e)}e.innerHTML=\"Player\",document.querySelector(\".computer-board\").removeEventListener(\"click\",this.updateCell)}else document.querySelector(\".computer-board\").addEventListener(\"click\",this.updateCell)}e.forEach(e=>{if(e.className.match(/hit/g)){const t=e.className,n=t.match(/ship-\\d+/)[0],o=Number(n.charAt(n.length-1)),r=t.match(/[A-Z]\\d+/)[0],i=this.gameEnvironment.ships[o];for(let e=0;e<i.ship_coordonates.length;e++)i.ship_coordonates[e]==r&&(i.places[e]=\"hit\",i.isSunk()&&this.changeShipSunk(i))}})},validRandomComputerMove:function(){let e=this.randomMove();for(;-1!==this.gameEnvironment.moves.indexOf(e.join(\"\"));)e=this.randomMove();return this.gameEnvironment.moves.push(e.join(\"\")),e},changeShipSunk:function(e){const t=Array.from(document.querySelectorAll(\".computer-board td\"));let n=10*this.gameEnvironment.letterToNum[e.ship_coordonates[0][0]]+Number(e.ship_coordonates[0].match(/\\d+/g)[0])-1,o=0;for(;o<e.length;)t[n].classList.add(\"sunk\"),t[n].classList.remove(\"hit\"),n++,o++},updateCell:function(e){if(console.log(e.target.className.value),document.querySelector(\"h1\"))document.querySelector(\"h1\").innerHTML=\"Computer\";else{const e=document.createElement(\"h1\");e.innerHTML=\"Computer\",document.querySelector(\".container\").appendChild(e)}if(e.target.classList.contains(\"computer-ship\")){e.target.classList.add(\"hit\");const t=e.target.className.split(\" \");let n=t.find(e=>e.match(/ship-\\d+/g));n=Number(n[n.length-1]);const o=t.find(e=>e.match(/[A-J]\\d+/g));if(document.querySelector(\".player-move\")){const e=document.querySelector(\".player-move\");e.innerHTML=\"\",e.innerHTML=o}else{const e=document.createElement(\"span\");e.className=\"player-move\",e.innerHTML=o,document.querySelector(\".container\").appendChild(e)}}else e.target.classList.add(\"miss\");console.log(e.target.classList)},placeRandomShips:function(){[1,1,1,1,2,2,2,3,3,4].forEach(e=>{let t=this.randomPlace();for(;!this.validPosition(e,t[0],t[1]);)t=this.randomPlace();this.placeShip(e,t[0],t[1])}),this.printBoard()},randomPlace:function(){return[String.fromCharCode(65+Math.round(9*Math.random())),Math.ceil(10*Math.random())]},validPosition:function(e,t,n){const o=this.gameEnvironment.board[this.gameEnvironment.letterToNum[t]];if(n+e<=10){let t=n+e-1;for(;t>n-1;){if(o[t-1].match(/ship/))return!1;t--}return!0}{let t=n-e-1;for(;n-1>t;){if(o[n-1].match(/ship/))return!1;n--}return!0}}}}}]);","extractedComments":[]}